{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Smart Companion application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "googleId": {
          "type": "string",
          "description": "The user's Google ID (if they signed up with Google). Null if they didn't."
        },
        "name": {
          "type": "string",
          "description": "The user's display name."
        }
      },
      "required": [
        "id",
        "email"
      ]
    },
    "Task": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Task",
      "type": "object",
      "description": "Represents a main task with its steps and sub-steps.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Task, typically 'current_task'."
        },
        "mainTask": {
          "type": "string",
          "description": "The main description of the task."
        },
        "createdAt": {
          "type": "number",
          "description": "Timestamp of when the task was created."
        },
        "steps": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "text": { "type": "string" },
              "completed": { "type": "boolean" },
              "subSteps": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string" },
                    "text": { "type": "string" },
                    "completed": { "type": "boolean" }
                  },
                  "required": ["id", "text", "completed"]
                }
              }
            },
            "required": ["id", "text", "completed", "subSteps"]
          }
        }
      },
      "required": ["id", "mainTask", "createdAt", "steps"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile information. The document ID is the Firebase Auth UID.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/tasks/{taskId}",
        "definition": {
          "entityName": "Task",
          "schema": {
            "$ref": "#/backend/entities/Task"
          },
          "description": "Stores the user's tasks. The document ID is usually 'current_task'.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            },
            {
              "name": "taskId",
              "description": "The ID of the task."
            }
          ]
        }
      }
    ]
  }
}
